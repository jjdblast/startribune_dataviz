<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Prince's Career by the Numbers</title>
  <meta name="description" content="Prince's Career by the Numbers">
  <meta name="author" content="Frey Hargarten, Billy Steve Clayton, Jamie Hutt - StarTribune">

  <link rel="stylesheet" href="http://striblab.github.io/startribune_dataviz/_common_resources/styles/startribune_dataviz_styles.css" />

  <style>
    body { font-family:"Benton Sans",Helvetica,Arial,sans-serif; max-width:525px; }
    #selector { margin-left:auto; margin-right:auto; text-align:center; }
    .button { background-color:#fff; border:1px solid #ddd; display:inline-block; font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-weight:900; padding:10px; text-align:center; width:100%; }
    .button:hover, .selected { background-color:#bc73bb !important; cursor:pointer; margin:0 !important; }
    .button { float:left; }
    .stat { float:right; }
    .filterBreak { border-top:1px solid #ddd; clear:both; height:2px; }
    .icon { float:left; padding:0 10px 18px 0; text-align:left; }
    .icon img { width:50px; }
    .bigicon { text-align:center; }
    .bigicon img { display:none; width:100px; }
    .year { font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-size:1em; margin:15px 0 15px 0; }
    .year div { margin:0px; }
    .yearHide { display:none; }
    .gold { color:#AAAA39; font-weight:900; }
    .diamond { color:#CBCBB3; font-weight:900; }
    .platinum { color:#989886; font-weight:900; }
    .yearLabel { font-family:"Popular"; font-size:2em; padding-bottom:0px; }
    .item.album { min-height:220px; }
    .item.alt { min-height:220px; }
    .item.billboard { min-height:70px; }
    .item.tour { min-height:70px; }
    .item.other { min-height:70px; }
    .item.grammy { min-height:70px; }
    .left { float:left; padding:-2px; width:49%; }
    .right { float:right; padding:-2px; width:49%; }
    .scrollToTop { color:#aaa !important; padding:15px; text-align:center; }
    .scrollToTop:hover { color:#333 !important; cursor:pointer; }
    .art img { width:200px; }
    .item.icon img { text-align:left !important; width:150px !important; }
    .item.icon { text-align:left !important; }
    .item { border-bottom:1px solid #ddd; margin-bottom:12px; min-height:52px; padding-bottom:12px; }
    #selector { display:none; }
    #wrapper { width:100%; }
    .leftSide { float:left; position:fixed; width:30%; }
    .rightSide { float:right; height:24000px; overflow-x:hidden; overflow-y:hidden; width:67%; }
    .title { font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-size:1.2em !important; font-weight:900; margin-bottom:5px !important; margin-top:15px !important; text-align:left; }
    .rank { margin-bottom:3px !important; }
    .label { margin-bottom:5px !important; }
    .author { margin-bottom:5px !important; }
    .art { float:right; padding:3px 12px 12px 12px; }
    .description { font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-size:1em !important; line-height:150%; margin-bottom:5px !important; margin-top:5px !important; }
    #filter { font-family:"Benton Sans"; font-size:1.2em; margin:5px; }
    #filter input { background-color:#fff !important; background-position:98% 50%; background-repeat:no-repeat; background-size:14px 14px; border:1px solid #eee !important; border-radius:0 !important; border-radius:0; box-shadow:inset 0 1px 2px rgba(0,0,0,0.1); color:rgba(0,0,0,0.75); font-family:"Benton Sans"; font-family:inherit; font-size:1em; height:30px; line-height:120%; margin:0; moz-transition:all 0.30s ease-in-out; ms-transition:all 0.30s ease-in-out; o-transition:all 0.30s ease-in-out; padding:25px 10px 25px 10px; webkit-appearance:none; webkit-border-radius:0; webkit-transition:all 0.30s ease-in-out; width:100% !important; width:100%; }
    #filter input:focus { border:1px solid #61bd1a; box-shadow:0 0 5px #333 !important; font-family:"Benton Sans"; padding:25px 10px 25px 10px; width:100% !important; }
    .wrapper-demo { width:100%; }
    .wrapper-dropdown-1 { background:#ddd; border:1px solid #aaa; box-shadow:0 2px 1px rgba(0, 0, 0, 0.10); color:#333; cursor:pointer; display:inline-block; font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-size:14px; font-weight:bold; outline:none; padding:16px; position:relative; width:100%; width:200px; z-index:900; }
    .wrapper-dropdown-1.active { background:#ddd !important; }
    .wrapper-dropdown-1 .dropdown { background:#ddd; border:1px solid #aaa; box-shadow:0 4px 5px rgba(0, 0, 0, 0.15); font-weight:normal; left:0; list-style:none; margin-top:0px !important; opacity:0; pointer-events:none; position:absolute; right:0; top:100%; }
    ul.dropdown.months { background:#ddd; background-clip:padding-box; border-radius:0 0 4px 4px; box-sizing:border-box; margin:0; margin-top:-1px; moz-box-sizing:border-box; padding:0; webkit-box-sizing:border-box; }
    .wrapper-dropdown-1 .dropdown { background:#ddd; border:1px solid #aaa; box-shadow:0 4px 5px rgba(0, 0, 0, 0.15); font-weight:normal; left:0; list-style:none; margin-top:0px !important; opacity:0; pointer-events:none; position:absolute; right:0; top:100%; }
    .wrapper-dropdown-1 .dropdown li:hover a { background:#bc73bb; }
    header[role="banner"] { background:#f0f0f0; height:40px; width:100%; z-index:1000; }
    .wrapper-dropdown-1 .dropdown li a { color:#757575; padding:5px 18px; }
    .wrapper-dropdown-1 .dropdown li a:hover { color:#fff; }
    .wrapper-dropdown-1 .dropdown li.selected { color:#fff !important; }
    .video-container { height:0; overflow:hidden; padding-bottom:56.25%; padding-top:30px; position:relative; }
    .video-container iframe,
     .video-container object,
     .video-container embed { height:100%; left:0; position:absolute; top:0; width:100%; }
    #filter { clear:both; display:block; margin:0; padding:0; padding-top:15px; text-align:center; width:100%; }
    #filterBox { display:none; }
    #selector { display:block; }
    .button, .stat { clear:both; float:none; width:100%; }
    .leftSide, .rightSide { float:none; position:static; width:100%; }

    @media only screen and (min-device-width: 320px) and (max-device-width: 640px) {
      .icon { float:left; padding:0 10px 0px 0; text-align:left; }
      .rightSide { height:800px; overflow-x:hidden; overflow-y:auto; padding-left:5%; padding-right:5%; width:100%; }
      .art { float:right; padding:3px 12px 12px 12px; }
      .art img { height:100%; margin:0 auto 10px auto; width:100%; } 
    }  
</style> 
</head>

<body>
  <div id="wrapper">
    <div class="filters">
      <div id="selector">
        <section class="main">
          <div class="wrapper-demo">
            <div id="dd" class="wrapper-dropdown-1" tabindex="1">
              <span>Prince Rogers Nelson (1958-2016)</span>
              <ul class="dropdown months" tabindex="1">
                <li class="switch button" data="all"><a href="#">All</a></li>
                <li class="switch button" data="album"><a href="#">Albums (51)</a></li>
                <li class="switch button" data="grammy"><a href="#">Grammy Awards (7)</a></li>
                <li class="switch button" data="tour"><a href="#">Tours (25)</a></li>
                <li class="switch button" data="billboard"><a href="#">Billboard Rankings (40)</a></li>
                <li class="switch button" data="tickets"><a href="#">Ticket Sales ($166m+)</a></li>
                <li class="switch button" data="other"><a href="#">Other Events</a></li>
              </ul>
            </div>
    â€‹       </div>
        </section>
      </div>
      <div id="filter"><input type="search" id="filter_box" placeholder="Search by keyword or year" /></div>
    </div>

    <div class="content">
      <div class="results" style="display:none;"></div>
      <div id="y1958" class="year"></div>
      <div id="y1975" class="year"></div>
      <div id="y1978" class="year"></div>
      <div id="y1979" class="year"></div>
      <div id="y1980" class="year"></div>
      <div id="y1981" class="year"></div>
      <div id="y1982" class="year"></div>
      <div id="y1983" class="year"></div>
      <div id="y1984" class="year"></div>
      <div id="y1985" class="year"></div>
      <div id="y1986" class="year"></div>
      <div id="y1987" class="year"></div>
      <div id="y1988" class="year"></div>
      <div id="y1990" class="year"></div>
      <div id="y1991" class="year"></div>
      <div id="y1992" class="year"></div>
      <div id="y1993" class="year"></div>
      <div id="y1994" class="year"></div>
      <div id="y1995" class="year"></div>
      <div id="y1996" class="year"></div>
      <div id="y1997" class="year"></div>
      <div id="y1998" class="year"></div>
      <div id="y1999" class="year"></div>
      <div id="y2000" class="year"></div>
      <div id="y2001" class="year"></div>
      <div id="y2002" class="year"></div>
      <div id="y2003" class="year"></div>
      <div id="y2004" class="year"></div>
      <div id="y2006" class="year"></div>
      <div id="y2007" class="year"></div>
      <div id="y2008" class="year"></div>
      <div id="y2009" class="year"></div>
      <div id="y2010" class="year"></div>
      <div id="y2011" class="year"></div>
      <div id="y2012" class="year"></div>
      <div id="y2013" class="year"></div>
      <div id="y2014" class="year"></div>
      <div id="y2015" class="year"></div>
      <div id="y2016" class="year"></div>
    </div>
  </div>

<div class="breaker"></div>
<div class="source">Sources: Billboard, Nielsen SoundScan</div>

<script src="//code.jquery.com/jquery-latest.js"></script>
<script src="../_common_resources/js/d3-master/d3.min.js" charset="utf-8"></script>
<script>
// $("#headerDiv").sticky({topSpacing:1});
</script>
<script>
//LIVE JSON MAGIC
d3.json("./data/prince.json", function(error, dataLoad) {
var data = dataLoad.stats;
$('.scrollToTop').click(function(){
    $('.rightSide').animate({scrollTop : 0},800);
    return false;
  });
$(".button").click(function() {
  $(".switch, .button").removeClass("selected");
  $(this).addClass("selected");
  $(".item, .year").hide();
  if ($(this).attr("data") == "all") { $(".item, .year").show(); }
  else { $("." + $(this).attr("data")).parent().show(); $("." + $(this).attr("data")).show(); }
});
// $("li.switch").click(function() {
//   $(".switch, .button").removeClass("selected");
//   $(this).addClass("selected");
//   $(".year").hide();
//   $(".item").show();
//   if ($(this).find("a").attr("data") == "all") { $(".item, .year").show(); }
//   else { $("#y" + $(this).find("a").attr("data")).show(); }
// });
function spitFirstItems(year){
 $("#y" + year).append(function(){ return "<div class='yearLabel'>" + year + "</div>" });
 d3.select("#y" + year).selectAll(".item")
  .data(data.filter(function(d){ return d.year == year; })).enter().append("div")
  .attr("class",function(d) { return "item " + d.type; })
  .html(function(d){ 
    if (d.type == "other"){
      return "<div class='yearHide'>" + d.year + "</div><div class='title'>" + d.title + "</div><div class='description'>" + d.notes + "</div>" ;
    }
    if (d.type == "album"){
      return "<div class='yearHide'>" + d.year + "</div><div class='art'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div><div class='rank'>Certified : " + d.rank + "</div><div class='label'>Label: " + d.label + "<div class='description'>" + d.strib_copy + "</div><div class='author'> ~ " + d.author + "</div><div class='score'>Score: " + d.strib_score + "</div>" ;
    }
    if (d.type == "alt"){
      return "<div class='yearHide'>" + d.year + "</div><div class='art'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div><div class='description'>" + d.notes + "</div>" ;
    }
    if (d.type == "billboard"){
      return "<div class='yearHide'>" + d.year + "</div><div class='icon'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div><div class='rank'>Billboard Rank: #" + d.rank + "</div>" ;
    }
    if (d.type == "grammy"){
      return  "<div class='yearHide'>" + d.year + "</div><div class='icon'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div><div class='rank'>Grammy Award</div>" ;
    }
    if (d.type == "tour"){
      var textstuff = "";
      if (d.notes != "#") { textstuff = "<div class='description'>" + d.notes + "</div>"; }
      return "<div class='yearHide'>" + d.year + "</div><div class='icon'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div>" + textstuff;
    }
    if (d.type == "tickets"){
      return "<div class='yearHide'>" + d.year + "</div><div class='icon'><img src='img/" + d.art + "' /></div><div class='title'>" + d.title + "</div><div class='rank'>Total Tickets Sold: " + d3.format(",")(d.TicketsSold) + "</div><div class='rank'>Average Tickets Sold: " + d3.format(",")(d.AvgTicketsSold) + "</div><div class='rank'>Gross: $" + d.gross_millions + " million</div>"
    }
 });
}
//SEARCH FILTER TABLE
  $( document ).ready(function() {
for(var i=1978; i<=2016; i++){ spitFirstItems(i); }
spitFirstItems(1958);
spitFirstItems(1975);
     $('#filter_box').keyup(function(i){
        $('.year').hide();
        $(".switch, .button").removeClass("selected");
        var txt = String($('#filter_box').val());
        $('.tickets, .other, .album, .tour, .billboard, .grammy').each(function(){
           if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1){
               $(this).parent().show();
               $(this).show();
           }
        });
        var count = $('.item:visible').length;
        // $('.results').show();
        // $('.results').html(count);
    });
});
});
</script>
<script type="text/javascript">
      
      function DropDown(el) {
        this.dd = el;
        this.placeholder = this.dd.children('span');
        this.opts = this.dd.find('ul.dropdown > li');
        this.val = '';
        this.index = -1;
        this.initEvents();
      }
      DropDown.prototype = {
        initEvents : function() {
          var obj = this;
          obj.dd.on('click', function(event){
            $(this).toggleClass('active');
            return false;
          });
          obj.opts.on('click',function(){
            var opt = $(this);
            obj.val = opt.text();
            obj.index = opt.index();
            obj.placeholder.text(obj.val);
          });
        },
        getValue : function() {
          return this.val;
        },
        getIndex : function() {
          return this.index;
        }
      }
      $(function() {
        var dd = new DropDown( $('#dd') );
        var dd2 = new DropDown( $('#ddY') );
        $(document).click(function() {
          // all dropdowns
          $('.wrapper-dropdown-1').removeClass('active');
        });
      });
</script>
<script src="http://static.startribune.com/js/pym/pym.min.js"></script>
<script>var pymChild = new pym.Child();</script>
</body>
</html>