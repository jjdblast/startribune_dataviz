!function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n?n:e)},s,s.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){d3.json("./shapefiles/mn_places.json",function(e,t){d3.json("./shapefiles/wi_places.json",function(e,n){d3.json("./shapefiles/mpls_nb.json",function(e,i){d3.json("./shapefiles/stp_nb.json",function(e,o){d3.json("./data/cities.json",function(e,r){function a(e,t,n,i,o){d3.select(e).selectAll(".row").sort(function(e,t){if("name"==i){if("descend"==o)return d3.descending(e.name,t.name);if("ascend"==o)return d3.ascending(e.name,t.name)}if("index"==i){if("descend"==o)return d3.descending(e.IndexScore,t.IndexScore);if("ascend"==o)return d3.ascending(e.IndexScore,t.IndexScore)}}).transition().duration(500)}function c(){u.flyTo({center:[-93.28469849,45.01832962],zoom:7.8}),$("#filter_box").val(""),$(".row").show()}function l(e){var t=s.filter(function(t){return t.name==e});String(e).indexOf("(MPLS)")!=-1?$("#districtName").html(t[0].CityState+", Minneapolis, MN"):String(e).indexOf("(STP)")!=-1?$("#districtName").html(t[0].CityState+", St. Paul, MN"):$("#districtName").html(t[0].CityState);var n="#888888";t[0].IndexScore>=300?n="#bd0026":t[0].IndexScore>=240?n="#f03b20":t[0].IndexScore>=180?n="#fd8d3c":t[0].IndexScore>=120?n="#fecc5c":t[0].IndexScore>=60&&(n="#ffffb2"),$("#districtName").css("background-color",n),$("#days").html(t[0].DaysMarket),$("#change").html(d3.format("+%")(t[0].PctChgfromAvg)),$("#distressed").html(d3.format("%")(t[0].PctDistressed)),$("#ppsf").html(d3.format("$,.0f")(t[0].PPSF2016)),$("#income").html(d3.format("$,.0f")(t[0].MedianHHincome)),$("#homes").html(d3.format("%")(t[0].PctSingleFamily)),$("#apartments").html(d3.format("%")(t[0].PctLargeApartmentBldgs)),$("#kids").html(d3.format("%")(t[0].PctKids)),$("#renters").html(d3.format("%")(t[0].PctRenters)),P.load({columns:[["x","2003-01-01","2004-01-01","2005-01-01","2006-01-01","2007-01-01","2008-01-01","2009-01-01","2010-01-01","2009-01-01","2010-01-01","2011-01-01","2012-01-01","2013-01-01","2014-01-01","2015-01-01","2016-01-01"],["PPSF",t[0].PPSF2003,t[0].PPSF2004,t[0].PPSF2005,t[0].PPSF2006,t[0].PPSF2007,t[0].PPSF2008,t[0].PPSF2009,t[0].PPSF2010,t[0].PPSF2011,t[0].PPSF2012,t[0].PPSF2013,t[0].PPSF2014,t[0].PPSF2015,t[0].PPSF2016]]})}var s=r.cities;d3.select("#cities").selectAll(".row").data(s.sort(function(e,t){return t.IndexScore-e.IndexScore})).enter().append("div").attr("class",function(e){return"Richfield"==e.name?"row selected":"row "}).style("background-color",function(e){var t="#888888";return e.IndexScore>=300?t="#bd0026":e.IndexScore>=240?t="#f03b20":e.IndexScore>=180?t="#fd8d3c":e.IndexScore>=120?t="#fecc5c":e.IndexScore>=60&&(t="#ffffb2"),t}).attr("latitude",function(e){return e.latitude}).attr("longitude",function(e){return e.longitude}).html(function(e,t){return"<div class='col name'>"+e.name+"</div><div class='col score'>"+e.IndexScore+"</div>"}),$(document).ready(function(){$(".zoom").click(function(){return c(),$("#cities").animate({scrollTop:0},800),!1}),$("#filter_box").on("keyup search",function(e){$(".row").hide();var t=$("#filter_box").val();$(".row").each(function(){$(this).text().toUpperCase().indexOf(t.toUpperCase())!=-1&&$(this).show()});var n=$(".row:visible").length;$("#results").html(n)}),$(".th").click(function(){if($(".th").removeClass("selected3"),$(this).addClass("selected3"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("selected3")){$(this).addClass("toggled");var e="descend"}a("#cities",null,s,$(this).attr("data"),e)}),$(".row").click(function(){$(".row").removeClass("selected"),$(this).addClass("selected");var e=Number($(this).attr("longitude")),t=Number($(this).attr("latitude"));$(this).find(".name").text().indexOf("(MPLS)")!=-1||$(this).find(".name").text().indexOf("(STP)")!=-1?u.flyTo({center:[e,t],zoom:13.5}):u.flyTo({center:[e,t],zoom:11.5}),l($(this).find(".name").text())})});var d=new mapboxgl.LngLat(-93.716125,44.643254),f=new mapboxgl.LngLat(-92.763062,45.350215);new mapboxgl.LngLatBounds(d,f);mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var u=new mapboxgl.Map({container:"map",style:"mapbox://styles/shadowflare/ciqznymjs0009btm891qyu49n",center:[-93.28469849,45.01832962],zoom:7.8,minZoom:7.8});u.scrollZoom.disable(),u.on("load",function(){u.addSource("mncities",{type:"geojson",data:t}),u.addLayer({id:"mncities-layer",interactive:!0,source:"mncities",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.8,"fill-color":{property:"index_IndexScore",type:"interval",stops:[[0,"#888888"],[60,"#ffffb2"],[120,"#fecc5c"],[180,"#fd8d3c"],[240,"#f03b20"],[300,"#bd0026"]]},"fill-outline-color":"rgba(255, 255, 255, 0.1)"}},"place-neighbourhood"),u.addSource("wicities",{type:"geojson",data:n}),u.addLayer({id:"wicities-layer",interactive:!0,source:"wicities",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.8,"fill-color":{property:"index_IndexScore",type:"interval",stops:[[0,"#888888"],[60,"#ffffb2"],[120,"#fecc5c"],[180,"#fd8d3c"],[240,"#f03b20"],[300,"#bd0026"]]},"fill-outline-color":"rgba(255, 255, 255, 0)"}},"place-neighbourhood"),u.addSource("mplsnb",{type:"geojson",data:i}),u.addLayer({id:"mplsnb-layer",interactive:!0,source:"mplsnb",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.8,"fill-color":{property:"nbindex_IndexScore",type:"interval",stops:[[0,"#888888"],[60,"#ffffb2"],[120,"#fecc5c"],[180,"#fd8d3c"],[240,"#f03b20"],[300,"#bd0026"]]},"fill-outline-color":"rgba(255, 255, 255, 0)"}},"place-neighbourhood"),u.addSource("stpnb",{type:"geojson",data:o}),u.addLayer({id:"stpnb-layer",interactive:!0,source:"stpnb",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.8,"fill-color":{property:"nbindex_IndexScore",type:"interval",stops:[[0,"#888888"],[60,"#ffffb2"],[120,"#fecc5c"],[180,"#fd8d3c"],[240,"#f03b20"],[300,"#bd0026"]]},"fill-outline-color":"rgba(255, 255, 255, 0)"}},"place-neighbourhood")});var m=s.filter(function(e){return"Richfield"==e.name}),p={top:40,right:40,bottom:30,left:40},P=c3.generate({bindto:"#chart",padding:p,data:{x:"x",columns:[["x","2003-01-01","2004-01-01","2005-01-01","2006-01-01","2007-01-01","2008-01-01","2009-01-01","2010-01-01","2009-01-01","2010-01-01","2011-01-01","2012-01-01","2013-01-01","2014-01-01","2015-01-01","2016-01-01"],["PPSF",m[0].PPSF2003,m[0].PPSF2004,m[0].PPSF2005,m[0].PPSF2006,m[0].PPSF2007,m[0].PPSF2008,m[0].PPSF2009,m[0].PPSF2010,m[0].PPSF2011,m[0].PPSF2012,m[0].PPSF2013,m[0].PPSF2014,m[0].PPSF2015,m[0].PPSF2016]],names:{PPSF:"Price per sqft"},colors:{PPSF:"#333333"}},legend:{show:!1},axis:{y:{max:330,min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format("$.0f")}},x:{type:"timeseries",tick:{format:"%Y"}}},regions:[{axis:"x",start:1990,end:2e3,class:"hottest",class:"yearScrub"}]});l("Richfield")})})})})})},{}]},{},[1]);